---
phase: 06-web-frontend-core
plan: 03
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - frontend/src/features/catalog/api/catalogApi.ts
  - frontend/src/features/catalog/hooks/useCatalog.ts
  - frontend/src/features/catalog/types.ts
  - frontend/src/features/catalog/components/CatalogCard.tsx
  - frontend/src/features/catalog/components/CatalogGrid.tsx
  - frontend/src/features/catalog/components/CatalogFilters.tsx
  - frontend/src/features/catalog/components/CatalogSearch.tsx
  - frontend/src/routes/catalog.tsx
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/components/layout/RootLayout.tsx
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can see list of catalog items as cards"
    - "User can filter by type using tab buttons"
    - "User can search by keyword"
    - "Clicking a card navigates to detail page"
    - "Sidebar shows Catalog link always, Dashboard when logged in"
  artifacts:
    - path: "frontend/src/features/catalog/api/catalogApi.ts"
      provides: "Catalog API calls"
      exports: ["catalogApi"]
    - path: "frontend/src/features/catalog/hooks/useCatalog.ts"
      provides: "Catalog hooks"
      exports: ["useCatalogItems"]
    - path: "frontend/src/features/catalog/components/CatalogCard.tsx"
      provides: "Catalog item card component"
      contains: "CatalogCard"
    - path: "frontend/src/routes/catalog.tsx"
      provides: "Catalog page with search and filters"
      contains: "CatalogPage"
    - path: "frontend/src/components/layout/Sidebar.tsx"
      provides: "Navigation sidebar"
      contains: "Sidebar"
  key_links:
    - from: "frontend/src/routes/catalog.tsx"
      to: "frontend/src/features/catalog/hooks/useCatalog.ts"
      via: "useCatalogItems hook for data fetching"
      pattern: "useCatalogItems"
    - from: "frontend/src/features/catalog/hooks/useCatalog.ts"
      to: "frontend/src/features/catalog/api/catalogApi.ts"
      via: "useQuery calling catalogApi"
      pattern: "catalogApi\\."
    - from: "frontend/src/features/catalog/components/CatalogCard.tsx"
      to: "/catalog/:id"
      via: "Link or navigate on click"
      pattern: "Link.*catalog"
---

<objective>
Implement catalog browser with card layout, type filtering, and keyword search.

Purpose: Enable users to browse all available skills, MCPs, and tools in a visually organized card-based interface with filtering by type and keyword search.

Output: Working catalog page showing items as cards, tab bar for filtering by type (All/Skills/MCPs/Tools), search input, and sidebar navigation.
</objective>

<execution_context>
@~/.claude/agents/gsd-executor.md
@~/.claude/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-web-frontend-core/06-CONTEXT.md
@.planning/phases/06-web-frontend-core/06-RESEARCH.md
@.planning/phases/06-web-frontend-core/06-01-SUMMARY.md
@backend/src/atlas/entrypoints/api/routes/catalog.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create catalog API layer and hooks</name>
  <files>
    frontend/src/features/catalog/types.ts
    frontend/src/features/catalog/api/catalogApi.ts
    frontend/src/features/catalog/hooks/useCatalog.ts
  </files>
  <action>
Create catalog feature with API layer and TanStack Query hooks:

1. Create src/features/catalog/types.ts:
   ```typescript
   export type CatalogItemType = 'SKILL' | 'MCP' | 'TOOL'

   export interface CatalogItemSummary {
     id: string
     type: CatalogItemType
     name: string
     description: string
     tags: string[]
     author_id: string
     team_id: string | null
     usage_count: number
   }

   export interface CatalogItemDetail extends CatalogItemSummary {
     git_path: string
     created_at: string
     updated_at: string
     documentation: string
   }

   export interface PaginatedCatalog {
     items: CatalogItemSummary[]
     total: number
     page: number
     size: number
     pages: number
   }

   export interface CatalogFilters {
     type?: CatalogItemType
     q?: string
     page?: number
     size?: number
   }
   ```

2. Create src/features/catalog/api/catalogApi.ts:
   ```typescript
   import { apiClient } from '@/lib/api'
   import type { CatalogItemDetail, PaginatedCatalog, CatalogFilters } from '../types'

   export const catalogApi = {
     getItems: async (filters: CatalogFilters = {}): Promise<PaginatedCatalog> => {
       const params = new URLSearchParams()

       if (filters.type) params.append('type', filters.type)
       if (filters.q) params.append('q', filters.q)
       if (filters.page) params.append('page', filters.page.toString())
       if (filters.size) params.append('size', filters.size.toString())

       const response = await apiClient.get(`/api/v1/catalog?${params.toString()}`)
       return response.data
     },

     getItemById: async (id: string): Promise<CatalogItemDetail> => {
       const response = await apiClient.get(`/api/v1/catalog/${id}`)
       return response.data
     },
   }
   ```

3. Create src/features/catalog/hooks/useCatalog.ts:
   ```typescript
   import { useQuery } from '@tanstack/react-query'
   import { catalogApi } from '../api/catalogApi'
   import type { CatalogFilters } from '../types'

   export const useCatalogItems = (filters: CatalogFilters = {}) => {
     return useQuery({
       queryKey: ['catalog', filters],
       queryFn: () => catalogApi.getItems(filters),
     })
   }

   export const useCatalogItem = (id: string) => {
     return useQuery({
       queryKey: ['catalog', 'detail', id],
       queryFn: () => catalogApi.getItemById(id),
       enabled: !!id,
     })
   }
   ```

4. Create index file:
   ```typescript
   // src/features/catalog/index.ts
   export * from './types'
   export * from './api/catalogApi'
   export * from './hooks/useCatalog'
   ```
  </action>
  <verify>
    cd frontend && npm run build
    grep -r "useCatalogItems" src/features/catalog/hooks/useCatalog.ts && echo "Hooks OK"
    grep -r "catalogApi" src/features/catalog/api/catalogApi.ts && echo "API OK"
  </verify>
  <done>Catalog API layer and TanStack Query hooks created</done>
</task>

<task type="auto">
  <name>Task 2: Create catalog UI components</name>
  <files>
    frontend/src/features/catalog/components/CatalogCard.tsx
    frontend/src/features/catalog/components/CatalogGrid.tsx
    frontend/src/features/catalog/components/CatalogFilters.tsx
    frontend/src/features/catalog/components/CatalogSearch.tsx
    frontend/src/features/catalog/components/index.ts
  </files>
  <action>
Create catalog UI components with shadcn/ui:

1. Install required shadcn components:
   ```bash
   cd frontend && npx shadcn@latest add badge tabs skeleton --yes
   ```

2. Create src/features/catalog/components/CatalogCard.tsx:
   ```typescript
   import { Link } from 'react-router-dom'
   import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
   import { Badge } from '@/components/ui/badge'
   import type { CatalogItemSummary, CatalogItemType } from '../types'

   const typeColors: Record<CatalogItemType, string> = {
     SKILL: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20',
     MCP: 'bg-blue-500/10 text-blue-400 border-blue-500/20',
     TOOL: 'bg-amber-500/10 text-amber-400 border-amber-500/20',
   }

   const typeLabels: Record<CatalogItemType, string> = {
     SKILL: 'Skill',
     MCP: 'MCP',
     TOOL: 'Tool',
   }

   interface CatalogCardProps {
     item: CatalogItemSummary
   }

   export function CatalogCard({ item }: CatalogCardProps) {
     return (
       <Link to={`/catalog/${item.id}`}>
         <Card className="h-full hover:border-primary/50 transition-colors cursor-pointer">
           <CardHeader className="pb-3">
             <div className="flex items-start justify-between gap-2">
               <CardTitle className="text-lg font-semibold line-clamp-1">
                 {item.name}
               </CardTitle>
               <Badge variant="outline" className={typeColors[item.type]}>
                 {typeLabels[item.type]}
               </Badge>
             </div>
             <CardDescription className="line-clamp-2">
               {item.description}
             </CardDescription>
           </CardHeader>
           <CardContent>
             <div className="flex flex-wrap gap-1">
               {item.tags.slice(0, 4).map((tag) => (
                 <span
                   key={tag}
                   className="text-xs text-muted-foreground bg-muted px-2 py-0.5 rounded"
                 >
                   {tag}
                 </span>
               ))}
               {item.tags.length > 4 && (
                 <span className="text-xs text-muted-foreground">
                   +{item.tags.length - 4}
                 </span>
               )}
             </div>
           </CardContent>
         </Card>
       </Link>
     )
   }
   ```

3. Create src/features/catalog/components/CatalogGrid.tsx:
   ```typescript
   import { Skeleton } from '@/components/ui/skeleton'
   import { CatalogCard } from './CatalogCard'
   import type { CatalogItemSummary } from '../types'

   interface CatalogGridProps {
     items: CatalogItemSummary[]
     isLoading: boolean
   }

   export function CatalogGrid({ items, isLoading }: CatalogGridProps) {
     if (isLoading) {
       return (
         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
           {Array.from({ length: 6 }).map((_, i) => (
             <div key={i} className="h-[180px]">
               <Skeleton className="h-full w-full rounded-lg" />
             </div>
           ))}
         </div>
       )
     }

     if (items.length === 0) {
       return (
         <div className="text-center py-12">
           <p className="text-muted-foreground">No items found</p>
         </div>
       )
     }

     return (
       <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
         {items.map((item) => (
           <CatalogCard key={item.id} item={item} />
         ))}
       </div>
     )
   }
   ```

4. Create src/features/catalog/components/CatalogFilters.tsx:
   ```typescript
   import { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs'
   import type { CatalogItemType } from '../types'

   interface CatalogFiltersProps {
     activeType: CatalogItemType | undefined
     onTypeChange: (type: CatalogItemType | undefined) => void
   }

   export function CatalogFilters({ activeType, onTypeChange }: CatalogFiltersProps) {
     const handleValueChange = (value: string) => {
       if (value === 'ALL') {
         onTypeChange(undefined)
       } else {
         onTypeChange(value as CatalogItemType)
       }
     }

     return (
       <Tabs value={activeType ?? 'ALL'} onValueChange={handleValueChange}>
         <TabsList>
           <TabsTrigger value="ALL">All</TabsTrigger>
           <TabsTrigger value="SKILL">Skills</TabsTrigger>
           <TabsTrigger value="MCP">MCPs</TabsTrigger>
           <TabsTrigger value="TOOL">Tools</TabsTrigger>
         </TabsList>
       </Tabs>
     )
   }
   ```

5. Create src/features/catalog/components/CatalogSearch.tsx:
   ```typescript
   import { useState, useEffect } from 'react'
   import { Input } from '@/components/ui/input'

   interface CatalogSearchProps {
     value: string
     onChange: (value: string) => void
   }

   export function CatalogSearch({ value, onChange }: CatalogSearchProps) {
     const [localValue, setLocalValue] = useState(value)

     // Debounce search input
     useEffect(() => {
       const timer = setTimeout(() => {
         onChange(localValue)
       }, 300)

       return () => clearTimeout(timer)
     }, [localValue, onChange])

     // Sync with external value changes
     useEffect(() => {
       setLocalValue(value)
     }, [value])

     return (
       <Input
         type="search"
         placeholder="Search catalog..."
         value={localValue}
         onChange={(e) => setLocalValue(e.target.value)}
         className="max-w-sm"
       />
     )
   }
   ```

6. Create index file:
   ```typescript
   // src/features/catalog/components/index.ts
   export { CatalogCard } from './CatalogCard'
   export { CatalogGrid } from './CatalogGrid'
   export { CatalogFilters } from './CatalogFilters'
   export { CatalogSearch } from './CatalogSearch'
   ```
  </action>
  <verify>
    cd frontend && npm run build
    ls src/features/catalog/components/CatalogCard.tsx && echo "Components OK"
  </verify>
  <done>Catalog UI components created with cards, filters, and search</done>
</task>

<task type="auto">
  <name>Task 3: Create layout components and catalog page</name>
  <files>
    frontend/src/components/layout/Sidebar.tsx
    frontend/src/components/layout/RootLayout.tsx
    frontend/src/routes/catalog.tsx
    frontend/src/App.tsx
  </files>
  <action>
Create layout with sidebar navigation and catalog page:

1. Install lucide-react for icons:
   ```bash
   cd frontend && npm install lucide-react
   ```

2. Create src/components/layout/Sidebar.tsx:
   ```typescript
   import { Link, useLocation } from 'react-router-dom'
   import { LayoutDashboard, Library, Settings, LogOut } from 'lucide-react'
   import { cn } from '@/lib/utils'
   import { useAuthStore } from '@/stores/authStore'
   import { useLogout } from '@/features/auth/hooks/useAuth'
   import { Button } from '@/components/ui/button'

   const navItems = [
     { href: '/catalog', label: 'Catalog', icon: Library, requiresAuth: false },
     { href: '/dashboard', label: 'Dashboard', icon: LayoutDashboard, requiresAuth: true },
     { href: '/settings', label: 'Settings', icon: Settings, requiresAuth: true },
   ]

   export function Sidebar() {
     const location = useLocation()
     const { isAuthenticated } = useAuthStore()
     const logout = useLogout()

     const visibleItems = navItems.filter(
       (item) => !item.requiresAuth || isAuthenticated
     )

     return (
       <aside className="w-64 border-r border-border bg-card h-screen flex flex-col">
         <div className="p-6">
           <Link to="/" className="flex items-center gap-2">
             <span className="text-xl font-bold">Atlas</span>
           </Link>
         </div>

         <nav className="flex-1 px-4">
           <ul className="space-y-1">
             {visibleItems.map((item) => {
               const Icon = item.icon
               const isActive = location.pathname === item.href

               return (
                 <li key={item.href}>
                   <Link
                     to={item.href}
                     className={cn(
                       'flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors',
                       isActive
                         ? 'bg-accent text-accent-foreground'
                         : 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'
                     )}
                   >
                     <Icon className="h-4 w-4" />
                     {item.label}
                   </Link>
                 </li>
               )
             })}
           </ul>
         </nav>

         <div className="p-4 border-t border-border">
           {isAuthenticated ? (
             <Button
               variant="ghost"
               className="w-full justify-start gap-3 text-muted-foreground hover:text-foreground"
               onClick={() => logout.mutate()}
             >
               <LogOut className="h-4 w-4" />
               Sign out
             </Button>
           ) : (
             <Link to="/login">
               <Button variant="outline" className="w-full">
                 Sign in
               </Button>
             </Link>
           )}
         </div>
       </aside>
     )
   }
   ```

3. Create src/components/layout/RootLayout.tsx:
   ```typescript
   import { Outlet } from 'react-router-dom'
   import { Sidebar } from './Sidebar'

   export function RootLayout() {
     return (
       <div className="flex min-h-screen bg-background">
         <Sidebar />
         <main className="flex-1 overflow-auto">
           <Outlet />
         </main>
       </div>
     )
   }
   ```

4. Create src/routes/catalog.tsx:
   ```typescript
   import { useState } from 'react'
   import { useCatalogItems } from '@/features/catalog/hooks/useCatalog'
   import { CatalogGrid, CatalogFilters, CatalogSearch } from '@/features/catalog/components'
   import type { CatalogItemType } from '@/features/catalog/types'

   export function CatalogPage() {
     const [type, setType] = useState<CatalogItemType | undefined>(undefined)
     const [search, setSearch] = useState('')

     const { data, isLoading, isError } = useCatalogItems({
       type,
       q: search || undefined,
     })

     return (
       <div className="p-6 space-y-6">
         <div>
           <h1 className="text-3xl font-bold">Catalog</h1>
           <p className="text-muted-foreground mt-1">
             Browse skills, MCPs, and tools available to your team
           </p>
         </div>

         <div className="flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between">
           <CatalogFilters activeType={type} onTypeChange={setType} />
           <CatalogSearch value={search} onChange={setSearch} />
         </div>

         {isError ? (
           <div className="text-center py-12">
             <p className="text-destructive">Failed to load catalog</p>
           </div>
         ) : (
           <CatalogGrid items={data?.items ?? []} isLoading={isLoading} />
         )}

         {data && data.pages > 1 && (
           <div className="text-center text-sm text-muted-foreground">
             Showing {data.items.length} of {data.total} items
           </div>
         )}
       </div>
     )
   }
   ```

5. Update src/App.tsx with layout and routes:
   ```typescript
   import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
   import { RootLayout } from './components/layout/RootLayout'
   import { LoginPage } from './routes/login'
   import { SignupPage } from './routes/signup'
   import { ResetPasswordPage } from './routes/reset-password'
   import { CatalogPage } from './routes/catalog'

   function App() {
     return (
       <BrowserRouter>
         <Routes>
           {/* Auth routes - no sidebar */}
           <Route path="/login" element={<LoginPage />} />
           <Route path="/signup" element={<SignupPage />} />
           <Route path="/reset-password" element={<ResetPasswordPage />} />

           {/* Main app routes - with sidebar */}
           <Route element={<RootLayout />}>
             <Route path="/catalog" element={<CatalogPage />} />
             <Route path="/catalog/:id" element={<div className="p-6">Detail page (coming in 06-04)</div>} />
             <Route path="/dashboard" element={<div className="p-6">Dashboard (coming in 06-05)</div>} />
             <Route path="/settings" element={<div className="p-6">Settings (future)</div>} />
           </Route>

           {/* Default redirect */}
           <Route path="/" element={<Navigate to="/catalog" replace />} />
         </Routes>
       </BrowserRouter>
     )
   }

   export default App
   ```

6. Create index files for components:
   ```typescript
   // src/components/layout/index.ts
   export { Sidebar } from './Sidebar'
   export { RootLayout } from './RootLayout'
   ```
  </action>
  <verify>
    cd frontend && npm run build
    grep -r "RootLayout" src/App.tsx && echo "Layout OK"
    grep -r "useCatalogItems" src/routes/catalog.tsx && echo "Catalog OK"
  </verify>
  <done>Layout with sidebar and catalog page created</done>
</task>

</tasks>

<verification>
- `cd frontend && npm run build` completes without errors
- Navigate to /catalog shows catalog page with sidebar
- Tab filters (All/Skills/MCPs/Tools) update the displayed items
- Search input filters items by keyword (debounced)
- Cards display item name, description, type badge, and tags
- Clicking a card navigates to /catalog/:id
- Sidebar shows Catalog always, Dashboard only when logged in
- Sign in/Sign out button in sidebar footer based on auth state
</verification>

<success_criteria>
1. Catalog page displays items in card grid layout
2. Type tabs filter items by SKILL/MCP/TOOL
3. Search input filters by keyword with debounce
4. Cards show name, description, type badge, tags
5. Clicking card navigates to detail route
6. Sidebar navigation with conditional Dashboard link
7. Loading skeleton shows while fetching
8. Empty state shows when no items match
</success_criteria>

<output>
After completion, create `.planning/phases/06-web-frontend-core/06-03-SUMMARY.md`
</output>
