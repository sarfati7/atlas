---
phase: 06-web-frontend-core
plan: 04
type: execute
wave: 3
depends_on: ["06-03"]
files_modified:
  - frontend/src/routes/catalog-detail.tsx
  - frontend/src/features/catalog/components/CatalogDetail.tsx
  - frontend/src/features/catalog/components/DocumentationViewer.tsx
  - frontend/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can view full details of a catalog item"
    - "Documentation (README) renders as formatted content"
    - "User can navigate back to catalog list"
    - "Loading state shows while fetching item"
    - "404 state shows for invalid item ID"
  artifacts:
    - path: "frontend/src/routes/catalog-detail.tsx"
      provides: "Catalog detail page"
      contains: "CatalogDetailPage"
    - path: "frontend/src/features/catalog/components/CatalogDetail.tsx"
      provides: "Detail view component"
      contains: "CatalogDetail"
    - path: "frontend/src/features/catalog/components/DocumentationViewer.tsx"
      provides: "Markdown documentation renderer"
      contains: "DocumentationViewer"
  key_links:
    - from: "frontend/src/routes/catalog-detail.tsx"
      to: "frontend/src/features/catalog/hooks/useCatalog.ts"
      via: "useCatalogItem hook for data fetching"
      pattern: "useCatalogItem"
    - from: "frontend/src/features/catalog/components/CatalogDetail.tsx"
      to: "frontend/src/features/catalog/components/DocumentationViewer.tsx"
      via: "Renders documentation content"
      pattern: "DocumentationViewer"
---

<objective>
Implement catalog item detail page with full documentation display.

Purpose: Enable users to view complete information about a skill, MCP, or tool including its full README documentation.

Output: Working detail page showing item metadata (name, type, tags, dates) and rendered documentation content from the item's README file.
</objective>

<execution_context>
@~/.claude/agents/gsd-executor.md
@~/.claude/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-web-frontend-core/06-CONTEXT.md
@.planning/phases/06-web-frontend-core/06-03-SUMMARY.md
@backend/src/atlas/entrypoints/api/routes/catalog.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create documentation viewer component</name>
  <files>
    frontend/src/features/catalog/components/DocumentationViewer.tsx
  </files>
  <action>
Create a markdown documentation viewer using react-markdown:

1. Install react-markdown and related dependencies:
   ```bash
   cd frontend && npm install react-markdown remark-gfm
   ```

2. Create src/features/catalog/components/DocumentationViewer.tsx:
   ```typescript
   import ReactMarkdown from 'react-markdown'
   import remarkGfm from 'remark-gfm'

   interface DocumentationViewerProps {
     content: string
   }

   export function DocumentationViewer({ content }: DocumentationViewerProps) {
     if (!content) {
       return (
         <div className="text-muted-foreground italic">
           No documentation available
         </div>
       )
     }

     return (
       <div className="prose prose-invert prose-sm max-w-none">
         <ReactMarkdown
           remarkPlugins={[remarkGfm]}
           components={{
             // Style headings
             h1: ({ children }) => (
               <h1 className="text-2xl font-bold border-b border-border pb-2 mb-4">
                 {children}
               </h1>
             ),
             h2: ({ children }) => (
               <h2 className="text-xl font-semibold mt-6 mb-3">{children}</h2>
             ),
             h3: ({ children }) => (
               <h3 className="text-lg font-medium mt-4 mb-2">{children}</h3>
             ),
             // Style code blocks
             pre: ({ children }) => (
               <pre className="bg-muted p-4 rounded-lg overflow-x-auto text-sm">
                 {children}
               </pre>
             ),
             code: ({ className, children, ...props }) => {
               const isInline = !className
               if (isInline) {
                 return (
                   <code className="bg-muted px-1.5 py-0.5 rounded text-sm" {...props}>
                     {children}
                   </code>
                 )
               }
               return <code className={className} {...props}>{children}</code>
             },
             // Style links
             a: ({ href, children }) => (
               <a
                 href={href}
                 className="text-primary hover:underline"
                 target="_blank"
                 rel="noopener noreferrer"
               >
                 {children}
               </a>
             ),
             // Style lists
             ul: ({ children }) => (
               <ul className="list-disc list-inside space-y-1 my-2">{children}</ul>
             ),
             ol: ({ children }) => (
               <ol className="list-decimal list-inside space-y-1 my-2">{children}</ol>
             ),
             // Style blockquotes
             blockquote: ({ children }) => (
               <blockquote className="border-l-4 border-border pl-4 italic text-muted-foreground my-4">
                 {children}
               </blockquote>
             ),
             // Style tables (GFM)
             table: ({ children }) => (
               <div className="overflow-x-auto my-4">
                 <table className="min-w-full border border-border">{children}</table>
               </div>
             ),
             th: ({ children }) => (
               <th className="border border-border bg-muted px-4 py-2 text-left font-medium">
                 {children}
               </th>
             ),
             td: ({ children }) => (
               <td className="border border-border px-4 py-2">{children}</td>
             ),
             // Style paragraphs
             p: ({ children }) => <p className="my-2 leading-relaxed">{children}</p>,
             // Style horizontal rules
             hr: () => <hr className="border-border my-6" />,
           }}
         >
           {content}
         </ReactMarkdown>
       </div>
     )
   }
   ```

3. Update src/features/catalog/components/index.ts:
   ```typescript
   export { CatalogCard } from './CatalogCard'
   export { CatalogGrid } from './CatalogGrid'
   export { CatalogFilters } from './CatalogFilters'
   export { CatalogSearch } from './CatalogSearch'
   export { DocumentationViewer } from './DocumentationViewer'
   ```
  </action>
  <verify>
    cd frontend && npm run build
    grep -r "ReactMarkdown" src/features/catalog/components/DocumentationViewer.tsx && echo "Markdown OK"
  </verify>
  <done>Documentation viewer with markdown rendering created</done>
</task>

<task type="auto">
  <name>Task 2: Create catalog detail components and page</name>
  <files>
    frontend/src/features/catalog/components/CatalogDetail.tsx
    frontend/src/routes/catalog-detail.tsx
    frontend/src/App.tsx
  </files>
  <action>
Create the catalog detail page with metadata display and documentation:

1. Install date formatting library:
   ```bash
   cd frontend && npm install date-fns
   ```

2. Create src/features/catalog/components/CatalogDetail.tsx:
   ```typescript
   import { format } from 'date-fns'
   import { ArrowLeft, Calendar, GitBranch, Users } from 'lucide-react'
   import { Link } from 'react-router-dom'
   import { Badge } from '@/components/ui/badge'
   import { Button } from '@/components/ui/button'
   import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
   import { Skeleton } from '@/components/ui/skeleton'
   import { DocumentationViewer } from './DocumentationViewer'
   import type { CatalogItemDetail, CatalogItemType } from '../types'

   const typeColors: Record<CatalogItemType, string> = {
     SKILL: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20',
     MCP: 'bg-blue-500/10 text-blue-400 border-blue-500/20',
     TOOL: 'bg-amber-500/10 text-amber-400 border-amber-500/20',
   }

   const typeLabels: Record<CatalogItemType, string> = {
     SKILL: 'Skill',
     MCP: 'MCP',
     TOOL: 'Tool',
   }

   interface CatalogDetailProps {
     item: CatalogItemDetail
   }

   export function CatalogDetail({ item }: CatalogDetailProps) {
     return (
       <div className="space-y-6">
         {/* Back button */}
         <Link to="/catalog">
           <Button variant="ghost" size="sm" className="gap-2">
             <ArrowLeft className="h-4 w-4" />
             Back to catalog
           </Button>
         </Link>

         {/* Header */}
         <div className="space-y-4">
           <div className="flex items-start justify-between gap-4">
             <div>
               <h1 className="text-3xl font-bold">{item.name}</h1>
               <p className="text-muted-foreground mt-2">{item.description}</p>
             </div>
             <Badge variant="outline" className={typeColors[item.type]}>
               {typeLabels[item.type]}
             </Badge>
           </div>

           {/* Tags */}
           <div className="flex flex-wrap gap-2">
             {item.tags.map((tag) => (
               <span
                 key={tag}
                 className="text-sm text-muted-foreground bg-muted px-3 py-1 rounded-full"
               >
                 {tag}
               </span>
             ))}
           </div>

           {/* Metadata row */}
           <div className="flex flex-wrap gap-6 text-sm text-muted-foreground">
             <div className="flex items-center gap-2">
               <Calendar className="h-4 w-4" />
               <span>Created {format(new Date(item.created_at), 'MMM d, yyyy')}</span>
             </div>
             <div className="flex items-center gap-2">
               <Calendar className="h-4 w-4" />
               <span>Updated {format(new Date(item.updated_at), 'MMM d, yyyy')}</span>
             </div>
             <div className="flex items-center gap-2">
               <GitBranch className="h-4 w-4" />
               <span className="font-mono text-xs">{item.git_path}</span>
             </div>
             <div className="flex items-center gap-2">
               <Users className="h-4 w-4" />
               <span>{item.usage_count} uses</span>
             </div>
           </div>
         </div>

         {/* Documentation */}
         <Card>
           <CardHeader>
             <CardTitle>Documentation</CardTitle>
           </CardHeader>
           <CardContent>
             <DocumentationViewer content={item.documentation} />
           </CardContent>
         </Card>
       </div>
     )
   }

   export function CatalogDetailSkeleton() {
     return (
       <div className="space-y-6">
         <Skeleton className="h-8 w-32" />
         <div className="space-y-4">
           <div className="flex items-start justify-between">
             <div className="space-y-2">
               <Skeleton className="h-9 w-64" />
               <Skeleton className="h-5 w-96" />
             </div>
             <Skeleton className="h-6 w-16" />
           </div>
           <div className="flex gap-2">
             <Skeleton className="h-6 w-20" />
             <Skeleton className="h-6 w-24" />
             <Skeleton className="h-6 w-16" />
           </div>
           <div className="flex gap-6">
             <Skeleton className="h-4 w-32" />
             <Skeleton className="h-4 w-32" />
             <Skeleton className="h-4 w-48" />
           </div>
         </div>
         <Card>
           <CardHeader>
             <Skeleton className="h-6 w-32" />
           </CardHeader>
           <CardContent>
             <div className="space-y-3">
               <Skeleton className="h-4 w-full" />
               <Skeleton className="h-4 w-3/4" />
               <Skeleton className="h-4 w-5/6" />
               <Skeleton className="h-24 w-full" />
               <Skeleton className="h-4 w-2/3" />
             </div>
           </CardContent>
         </Card>
       </div>
     )
   }
   ```

3. Create src/routes/catalog-detail.tsx:
   ```typescript
   import { useParams, Link } from 'react-router-dom'
   import { useCatalogItem } from '@/features/catalog/hooks/useCatalog'
   import { CatalogDetail, CatalogDetailSkeleton } from '@/features/catalog/components/CatalogDetail'
   import { Button } from '@/components/ui/button'
   import { ArrowLeft } from 'lucide-react'

   export function CatalogDetailPage() {
     const { id } = useParams<{ id: string }>()
     const { data, isLoading, isError } = useCatalogItem(id!)

     if (isLoading) {
       return (
         <div className="p-6">
           <CatalogDetailSkeleton />
         </div>
       )
     }

     if (isError || !data) {
       return (
         <div className="p-6 space-y-4">
           <Link to="/catalog">
             <Button variant="ghost" size="sm" className="gap-2">
               <ArrowLeft className="h-4 w-4" />
               Back to catalog
             </Button>
           </Link>
           <div className="text-center py-12">
             <h2 className="text-xl font-semibold text-destructive">Item not found</h2>
             <p className="text-muted-foreground mt-2">
               The catalog item you're looking for doesn't exist or has been removed.
             </p>
           </div>
         </div>
       )
     }

     return (
       <div className="p-6">
         <CatalogDetail item={data} />
       </div>
     )
   }
   ```

4. Update src/features/catalog/components/index.ts:
   ```typescript
   export { CatalogCard } from './CatalogCard'
   export { CatalogGrid } from './CatalogGrid'
   export { CatalogFilters } from './CatalogFilters'
   export { CatalogSearch } from './CatalogSearch'
   export { DocumentationViewer } from './DocumentationViewer'
   export { CatalogDetail, CatalogDetailSkeleton } from './CatalogDetail'
   ```

5. Update src/App.tsx to use the detail page:
   ```typescript
   import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
   import { RootLayout } from './components/layout/RootLayout'
   import { LoginPage } from './routes/login'
   import { SignupPage } from './routes/signup'
   import { ResetPasswordPage } from './routes/reset-password'
   import { CatalogPage } from './routes/catalog'
   import { CatalogDetailPage } from './routes/catalog-detail'

   function App() {
     return (
       <BrowserRouter>
         <Routes>
           {/* Auth routes - no sidebar */}
           <Route path="/login" element={<LoginPage />} />
           <Route path="/signup" element={<SignupPage />} />
           <Route path="/reset-password" element={<ResetPasswordPage />} />

           {/* Main app routes - with sidebar */}
           <Route element={<RootLayout />}>
             <Route path="/catalog" element={<CatalogPage />} />
             <Route path="/catalog/:id" element={<CatalogDetailPage />} />
             <Route path="/dashboard" element={<div className="p-6">Dashboard (coming in 06-05)</div>} />
             <Route path="/settings" element={<div className="p-6">Settings (future)</div>} />
           </Route>

           {/* Default redirect */}
           <Route path="/" element={<Navigate to="/catalog" replace />} />
         </Routes>
       </BrowserRouter>
     )
   }

   export default App
   ```
  </action>
  <verify>
    cd frontend && npm run build
    grep -r "CatalogDetailPage" src/routes/catalog-detail.tsx && echo "Detail OK"
    grep -r "DocumentationViewer" src/features/catalog/components/CatalogDetail.tsx && echo "Docs OK"
  </verify>
  <done>Catalog detail page with documentation rendering created</done>
</task>

</tasks>

<verification>
- `cd frontend && npm run build` completes without errors
- Navigate to /catalog/:id shows detail page
- Detail page shows item name, description, type badge
- Tags display as rounded chips
- Metadata shows created date, updated date, git path, usage count
- Documentation section renders markdown content
- Code blocks are styled with background
- Links open in new tab
- Back button navigates to /catalog
- Invalid ID shows 404 state with back button
- Loading state shows skeleton while fetching
</verification>

<success_criteria>
1. Detail page displays item metadata correctly
2. Documentation renders markdown with proper styling
3. Code blocks, links, lists, headings are styled
4. Back button returns to catalog list
5. 404 state shows for invalid item IDs
6. Loading skeleton shows during fetch
7. Empty documentation shows "No documentation available"
</success_criteria>

<output>
After completion, create `.planning/phases/06-web-frontend-core/06-04-SUMMARY.md`
</output>
